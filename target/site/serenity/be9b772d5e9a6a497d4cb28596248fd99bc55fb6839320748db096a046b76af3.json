{"name":"validar errores de validación","id":"transacción-con-nequi-en-wompi-sandbox;validar-errores-de-validación","testSteps":[{"number":1,"description":"Dado \"Adrian\" obtiene la baseurl de la api","duration":5,"startTime":"2025-10-16T01:02:06.179-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":0},{"number":2,"description":"Dado que el usuario obtiene los tokens de aceptación de Wompi","duration":4264,"startTime":"2025-10-16T01:02:06.186-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":0,"children":[{"number":3,"description":"Adrian call the service at execute GET","duration":3796,"startTime":"2025-10-16T01:02:06.228-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":1,"children":[{"number":4,"description":"Adrian get request","duration":3751,"startTime":"2025-10-16T01:02:06.231-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":2,"children":[{"number":5,"description":"Adrian executes a GET on the resource /merchants/pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7","duration":3689,"startTime":"2025-10-16T01:02:06.261-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":3,"children":[{"number":6,"description":"GET https://api-sandbox.co.uat.wompi.dev/v1/merchants/pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7","duration":0,"startTime":"2025-10-16T01:02:09.950-05:00[America/Bogota]","result":"SUCCESS","restQuery":{"method":"GET","path":"https://api-sandbox.co.uat.wompi.dev/v1/merchants/pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7","content":"","contentType":"application/json","requestHeaders":"Accept\u003dJSON\r\n\t\t\t\tContent-Type\u003dapplication/json","requestCookies":"","responseHeaders":"Content-Type: application/json\r\nTransfer-Encoding: chunked\r\nConnection: keep-alive\r\nDate: Thu, 16 Oct 2025 06:02:09 GMT\r\nvary: Origin\r\nvary: accept-encoding\r\napigw-requestid: ShqPUiWqIAMEc0A\u003d\r\ncontent-encoding: gzip\r\nX-Cache: Miss from cloudfront\r\nVia: 1.1 633d8264d45ae687b494f2ccaaeb966a.cloudfront.net (CloudFront)\r\nX-Amz-Cf-Pop: ATL59-P14\r\nX-Amz-Cf-Id: INtzH-6lYOXLdsIGii35DN455RWNJPKgWV-KqwxaOfJNDA-K6lsIcQ\u003d\u003d\r\nX-XSS-Protection: 1; mode\u003dblock\r\nX-Frame-Options: SAMEORIGIN\r\nReferrer-Policy: strict-origin-when-cross-origin\r\nX-Content-Type-Options: nosniff\r\nStrict-Transport-Security: max-age\u003d31536000\r","responseCookies":"\r","responseBody":"{\n    \"data\": {\n        \"id\": 5113,\n        \"name\": \"Alejandra Pruebas Sandbox UAT\",\n        \"email\": \"pruebasensandbox@yopmail.com\",\n        \"contact_name\": \"Alejandra Pruebas Sandbox UAT\",\n        \"phone_number\": \"+573000000000\",\n        \"active\": true,\n        \"logo_url\": null,\n        \"legal_name\": \"Alejandra Pruebas Sandbox UAT\",\n        \"legal_id_type\": \"CC\",\n        \"legal_id\": \"1069879849\",\n        \"public_key\": \"pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\",\n        \"accepted_currencies\": [\n            \"COP\"\n        ],\n        \"fraud_javascript_key\": null,\n        \"fraud_groups\": [\n            \n        ],\n        \"accepted_payment_methods\": [\n            \"NEQUI\",\n            \"PSE\",\n            \"BANCOLOMBIA_TRANSFER\",\n            \"CARD\",\n            \"BANCOLOMBIA_COLLECT\",\n            \"BANCOLOMBIA_QR\",\n            \"DAVIPLATA\",\n            \"BANCOLOMBIA_BNPL\",\n            \"SU_PLUS\"\n        ],\n        \"payment_methods\": [\n            {\n                \"name\": \"BANCOLOMBIA_BNPL\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_BNPL_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"BANCOLOMBIA_COLLECT\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_COLLECT_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"BANCOLOMBIA_QR\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_QR_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"BANCOLOMBIA_TRANSFER\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_TRANSFER_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"CARD\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"CARD_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"DAVIPLATA\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"DAVIPLATA_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"NEQUI\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"NEQUI_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"PSE\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"PSE_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"SU_PLUS\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"SU_PLUS_SANDBOX\"\n                    }\n                ]\n            }\n        ],\n        \"presigned_acceptance\": {\n            \"acceptance_token\": \"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6NTA3LCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvcmVnbGFtZW50by1Vc3Vhcmlvcy1Db2xvbWJpYS5wZGYiLCJmaWxlX2hhc2giOiJkYzJkNGUzMDVlNGQzNmFhYjhjYzU3N2I1YTY5Nzg1MSIsImppdCI6IjE3NjA1OTQ1MjktOTUxNDMiLCJlbWFpbCI6IiIsImV4cCI6MTc2MDU5ODEyOX0.uN3JaNif5oYGbtNXPNkS2OuKgvsSVl3sEvMlX5IzmUQ\",\n            \"permalink\": \"https://wompi.com/assets/downloadble/reglamento-Usuarios-Colombia.pdf\",\n            \"type\": \"END_USER_POLICY\"\n        },\n        \"presigned_personal_data_auth\": {\n            \"acceptance_token\": \"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6NDc0LCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvYXV0b3JpemFjaW9uLXRyYXRhbWllbnRvLWRhdG9zLXBlcnNvbmFsZXMucGRmIiwiZmlsZV9oYXNoIjoiNTE2ODYzZjA3NzZlZWY3NjBkNGI5OWFiMWJlZjRjNzgiLCJqaXQiOiIxNzYwNTk0NTI5LTE2MzYzIiwiZW1haWwiOiIifQ.xoXVQu2uzxrWWS1CSPKS0RL9Cb-aI0dxLPI9fL3-KeI\",\n            \"permalink\": \"https://wompi.com/assets/downloadble/autorizacion-tratamiento-datos-personales.pdf\",\n            \"type\": \"PERSONAL_DATA_AUTH\"\n        },\n        \"click_to_pay_dpa_id\": null,\n        \"mcc\": null,\n        \"acquirer_id\": null\n    },\n    \"meta\": {\n        \n    }\n}","statusCode":200},"precondition":false,"level":4}]}]}]},{"number":7,"description":"Then {0} valida la respuesta de la API","duration":113,"startTime":"2025-10-16T01:02:10.070-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":1,"children":[{"number":8,"description":"SERVICE STATUS","duration":38,"startTime":"2025-10-16T01:02:10.108-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":2}]},{"number":9,"description":"Then get acceptance token","duration":134,"startTime":"2025-10-16T01:02:10.266-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":1}]},{"number":10,"description":"Cuando el usuario crea una transacción con Nequi con datos invalidos","duration":9267,"startTime":"2025-10-16T01:02:10.451-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":0,"children":[{"number":11,"description":"Adrian crear transaccion nequi","duration":9231,"startTime":"2025-10-16T01:02:10.464-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":1,"children":[{"number":12,"description":"Adrian post request","duration":9198,"startTime":"2025-10-16T01:02:10.479-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":2,"children":[{"number":13,"description":"Adrian executes a POST on the resource /transactions","duration":9127,"startTime":"2025-10-16T01:02:10.529-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":3,"children":[{"number":14,"description":"POST https://api-sandbox.co.uat.wompi.dev/v1/transactions","duration":0,"startTime":"2025-10-16T01:02:19.656-05:00[America/Bogota]","result":"SUCCESS","restQuery":{"method":"POST","path":"https://api-sandbox.co.uat.wompi.dev/v1/transactions","content":"{\n    \"amount_in_cents\": 10,\n    \"currency\": \"COP\",\n    \"payment_method_type\": \"NEQUI\",\n    \"payment_method\": {\n        \"type\": \"NEQUI\",\n        \"phone_number\": \"3992222222\"\n    },\n    \"customer_email\": \"cliente@example.com\",\n    \"reference\": \"order-1760594530468\",\n    \"acceptance_token\": \"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6NTA3LCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvcmVnbGFtZW50by1Vc3Vhcmlvcy1Db2xvbWJpYS5wZGYiLCJmaWxlX2hhc2giOiJkYzJkNGUzMDVlNGQzNmFhYjhjYzU3N2I1YTY5Nzg1MSIsImppdCI6IjE3NjA1OTQ1MjktOTUxNDMiLCJlbWFpbCI6IiIsImV4cCI6MTc2MDU5ODEyOX0.uN3JaNif5oYGbtNXPNkS2OuKgvsSVl3sEvMlX5IzmUQ\",\n    \"accept_personal_auth\": \"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6NDc0LCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvYXV0b3JpemFjaW9uLXRyYXRhbWllbnRvLWRhdG9zLXBlcnNvbmFsZXMucGRmIiwiZmlsZV9oYXNoIjoiNTE2ODYzZjA3NzZlZWY3NjBkNGI5OWFiMWJlZjRjNzgiLCJqaXQiOiIxNzYwNTk0NTI5LTE2MzYzIiwiZW1haWwiOiIifQ.xoXVQu2uzxrWWS1CSPKS0RL9Cb-aI0dxLPI9fL3-KeI\",\n    \"signature\": \"91ddfbac6bd169a5e60453165cec24aaf7eec500f8660da06159692c0d1d8ca3\"\n}","contentType":"application/json","requestHeaders":"Authorization\u003dBearer pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\r\n\t\t\t\tAccept\u003d*/*\r\n\t\t\t\tContent-Type\u003dapplication/json","requestCookies":"","responseHeaders":"Content-Type: application/json\r\nContent-Length: 153\r\nConnection: keep-alive\r\nDate: Thu, 16 Oct 2025 06:02:19 GMT\r\napigw-requestid: ShqQzgVAIAMEclg\u003d\r\nvary: Origin\r\nX-Cache: Error from cloudfront\r\nVia: 1.1 2360294758b8ff90111eae52b6d2db30.cloudfront.net (CloudFront)\r\nX-Amz-Cf-Pop: ATL59-P14\r\nX-Amz-Cf-Id: fkaLoWUPr8ukLg3OILc4kN-q4uAK-ua5l0nmI_jb36LcZcJVXNNv9A\u003d\u003d\r\nX-XSS-Protection: 1; mode\u003dblock\r\nX-Frame-Options: SAMEORIGIN\r\nReferrer-Policy: strict-origin-when-cross-origin\r\nX-Content-Type-Options: nosniff\r\nStrict-Transport-Security: max-age\u003d31536000\r","responseCookies":"\r","responseBody":"{\n    \"error\": {\n        \"type\": \"INPUT_VALIDATION_ERROR\",\n        \"messages\": {\n            \"valid_amount_in_cents\": [\n                \"El monto mínimo de una transacción es $1,500 exceptuando impuestos\"\n            ]\n        }\n    }\n}","statusCode":422},"precondition":false,"level":4}]}]}]}]},{"number":15,"description":"Entonces la transacción debe fallar con el mensaje \"El monto mínimo de una transacción es $1,500 exceptuando impuestos\"","duration":165,"startTime":"2025-10-16T01:02:19.721-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":0,"children":[{"number":16,"description":"Validar mensaje de error de validaci\u0026oacute;n","duration":133,"startTime":"2025-10-16T01:02:19.736-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":1}]}],"userStory":{"id":"transacción-con-nequi-en-wompi-sandbox","storyName":"Transacción con Nequi en Wompi Sandbox","displayName":"Transacción con Nequi en Wompi Sandbox","path":"nequi_transaction.feature","narrative":"  Yo como Adrian\n  Quiero realizar consumos de servicios api rest\n  Para validar los diferentes estados de una transacción con Nequi","type":"feature"},"featureTag":{"name":"Transacción con Nequi en Wompi Sandbox","type":"feature","displayName":"Transacción con Nequi en Wompi Sandbox"},"title":"validar errores de validación","description":"","backgroundTitle":"","backgroundDescription":"","tags":[{"name":"Transacción con Nequi en Wompi Sandbox","type":"feature","displayName":"Transacción con Nequi en Wompi Sandbox"}],"startTime":"2025-10-16T01:02:06.150-05:00[America/Bogota]","duration":13738,"projectKey":"","isManualTestingUpToDate":false,"manual":false,"testSource":"Cucumber","actors":[{"name":"Adrian","can":["browse the web","call an API at https://api-sandbox.co.uat.wompi.dev/v1"]}],"result":"SUCCESS"}